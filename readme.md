# Документация проекта

## Инструкция по запуску приложения

Чтобы запустить приложение, необходимо выполнить следующие шаги:

1. Установите Docker и Docker Compose на вашем компьютере.
2. Скачайте или клонируйте репозиторий с проектом.
3. Откройте терминал в корневой директории проекта.
4. Выполните команду `docker-compose up -d` для сборки и запуска контейнеров.

В корневой директории проекта находится файл `docker-compose.yml`, который описывает конфигурацию приложения. Он включает в себя:

- Контейнер с базой данных PostgreSQL.
- Контейнер с приложением на языке Kotlin.
- Контейнер с Redis для работы машины состояний.

## Демонстрация работы приложения

Приложение представляет собой бота, который помогает пользователям планировать путешествия. Он может находить билеты на поезд, самолёт, предоставлять информацию о погоде в выбранном городе и рекомендовать отели для проживания, достопримечательности, рестораны.

Основные сценарии работы бота:

1. Поиск билетов на поезд и самолёт: пользователь вводит город отправления, город назначения и дату. Бот предоставляет список доступных билетов с указанием времени отправления, прибытия, стоимости и номера поезда.
2. Прогноз погоды: пользователь вводит город и дату. Бот предоставляет информацию о погоде в выбранный день, включая температуру, влажность, давление и скорость ветра.
3. Рекомендации отелей: пользователь вводит город и даты проживания. Бот предоставляет список отелей в выбранном городе, отсортированный по рейтингу и стоимости.
4. Рекомендации ресторанов и достопримечательностей: пользователю будут предложены места и рестораны

## Описание внешних интеграций

### API Яндекс.Расписания

Для поиска билетов на поезд приложение использует API Яндекс.Расписания. Этот сервис предоставляет информацию о расписании поездов, а также позволяет забронировать билеты. Сервис был выбран из-за его высокой точности и надежности.

### API Яндекс.Погоды

Для получения прогноза погоды используется API Яндекс.Погоды. Этот сервис предоставляет информацию о погоде в различных городах мира, включая температуру, влажность, давление и скорость ветра. Сервис был выбран из-за его простоты и широкого охвата городов.

### API Яндекс.Карт

Для получения вокзалов API Яндекс.Карт. Этот сервис предоставляет информацию о расположении вокзалов в различных городах мира, а также geocoder. Сервис был выбран из-за его простоты и надёжности .


### API HotelLook

Для рекомендации отелей используется API HotelLook от Travelpayouts. Этот сервис предоставляет информацию о доступных отелях, их стоимости, рейтинге и отзывах. Сервис был выбран из-за его популярности и широкого выбора отелей.

### API Aviasales

Для поиска авиабилетов используется API Aviasales от Travelpayouts. Этот сервис предоставляет информацию о расписании самолётов, а также позволяет забронировать билеты. Сервис был выбран из-за его высокой точности и надежности, популярности.


### API Sightsafari

Для поиска достопримечательностей используется API Sightsafari с базой OpenStreetMaps. Этот сервис предоставляет список достопримечательностей, а также geocoder для поиска координат мест по названию. Сервис был выбран из-за его высокой точности и доступности.


### API Geoapify

Для генерации маршрутов, статических карт используется API Geoapify с базой OpenStreetMaps. Этот сервис предоставляет geocoder, сервис прокладывания кратчайших маршрутов, рендер статических карт. Сервис был выбран из-за его высокой точности и доступности.


# Схема базы данных

Данный раздел описывает схему базы данных, используемую в проекте. Проект использует PostgreSQL в качестве системы управления базами данных.

## Таблица пользователей

Таблица `users` хранит информацию о зарегистрированных пользователях.

| Название столбца | Тип данных | Описание |
| --- | --- | --- |
| id | integer | Уникальный идентификатор записи пользователя. |
| name | varchar | Имя пользователя (до 50 символов). |
| tg\_login | varchar | Логин пользователя в Telegram (до 50 символов). |
| tg\_id | bigint | Идентификатор пользователя в Telegram. |

## Расширенная таблица пользователей

Таблица `extended_user` хранит дополнительную информацию о пользователях.

| Название столбца | Тип данных | Описание |
| --- | --- | --- |
| tg\_id | bigint | Идентификатор пользователя в Telegram. |
| user\_old | integer | Старый идентификатор пользователя. |
| country\_city | varchar | Город и страна пользователя (до 100 символов). |
| bio | varchar | Биография пользователя (до 300 символов). |

## Таблица приключений

Таблица `adventures` хранит информацию о приключениях.

| Название столбца | Тип данных | Описание |
| --- | --- | --- |
| id | integer | Уникальный идентификатор приключения. |
| created\_at | bigint | Время создания приключения. |
| name | varchar | Название приключения (до 100 символов). |
| description | varchar | Описание приключения (до 400 символов). |
| created\_by | bigint | Идентификатор пользователя, создавшего приключение. |

## Таблица приглашений на приключения

Таблица `adventure_invites` хранит информацию о приглашениях на приключения.

| Название столбца | Тип данных | Описание |
| --- | --- | --- |
| adventure\_id | integer | Идентификатор приключения. |
| invited\_user | bigint | Идентификатор приглашенного пользователя. |

## Таблица городов приключений

Таблица `adventure_cities` хранит информацию о городах, связанных с приключениями.

| Название столбца | Тип данных | Описание |
| --- | --- | --- |
| id | integer | Уникальный идентификатор записи города приключения. |
| name | varchar | Название города (до 100 символов). |
| start\_time | bigint | Время начала приключения в городе. |
| end\_time | bigint | Время окончания приключения в городе. |
| adventure\_id | integer | Идентификатор приключения. |